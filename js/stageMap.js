function StageMap(stage){
    this.stage = [];

    this.stage[0] = function(stage){
        stage.addEvent("addEnemy", "", [100, -40, 0, 100], 1, 0);
        stage.addEvent("addEnemy", "", [400, -40, 0, 100], 1, 0);
        stage.addEvent("enemyMove", 0, [{X: 100, Y: 200}], 80, 120);
        stage.addEvent("enemyMove", 1, [{X: 400, Y: 200}], 80, 120);
        stage.addEvent("enemyAttack", 0, [3, 12, 500, 4, -45, 45], 100, 0);
        stage.addEvent("enemyAttack", 1, [3, 12, 500, 4, -45, 45], 100, 0);
        stage.addEvent("addEnemy", "", [0, -40, 0, 100], 200, 0);
        stage.addEvent("addEnemy", "", [500, -40, 0, 100], 200, 0);
        stage.addEvent("enemyMove", 0, [{X: 100, Y: 150}], 250, 60);
        stage.addEvent("enemyMove", 1, [{X: 400, Y: 150}], 250, 60);
        stage.addEvent("enemyAttack", 2, [1, 8, 800, 18, 36], 300, 0);
        stage.addEvent("enemyAttack", 3, [1, 8, 800, 18, 36], 300, 0);
        stage.addEvent("enemyMove", 2, [{X: 150, Y: 200}], 350, 60);
        stage.addEvent("enemyMove", 3, [{X: 350, Y: 200}], 350, 60);
        stage.addEvent("enemyMove", 0, [{X: -100, Y: 400}], 400, 120);
        stage.addEvent("enemyMove", 1, [{X: 612, Y: 400}], 400, 120);
        stage.addEvent("enemyRemove", 0, [], 521, 0);
        stage.addEvent("enemyRemove", 1, [], 521, 0);
        stage.addEvent("addEnemy", "", [100, -100, 1, 1200], 600, 0);
        stage.addEvent("addEnemy", "", [400, -100, 1, 1200], 600, 0);
        stage.addEvent("enemyMove", 4, [{X: 100, Y: 50}], 601, 100);
        stage.addEvent("enemyMove", 5, [{X: 400, Y: 50}], 601, 100);
        stage.addEvent("enemyMove", 2, [{X: -100, Y: 300}], 650, 60);
        stage.addEvent("enemyMove", 3, [{X: 612, Y: 300}], 650, 60);
        stage.addEvent("enemyAttack", 4, [2, 6, 300, 8, -5, 8], 700, 0);
        stage.addEvent("enemyAttack", 5, [2, 6, 300, 8, 5, -8], 700, 0);
        stage.addEvent("enemyRemove", 2, [], 711, 0);
        stage.addEvent("enemyRemove", 3, [], 711, 0);
        stage.addEvent("addEnemy", "", [305, -100, 1, 25000], 800, 0);
        stage.addEvent("enemyMove", 6, [{X: 255, Y: 80}], 801, 60);
        stage.addEvent("enemyAttack", 6, [2, 6, 1200, 55, 5, -8], 850, 0);
        stage.addEvent("enemyMove", 4, [{X: -100, Y: 50}], 1000, 100);
        stage.addEvent("enemyMove", 5, [{X: 612, Y: 50}], 1000, 100);
        stage.addEvent("addEnemy", "", [0, -100, 0, 50], 1000, 0);
        stage.addEvent("addEnemy", "", [50, -100, 0, 50], 1000, 0);
        stage.addEvent("addEnemy", "", [100, -100, 0, 50], 1000, 0);
        stage.addEvent("addEnemy", "", [150, -100, 0, 50], 1000, 0);
        stage.addEvent("addEnemy", "", [350, -100, 0, 50], 1000, 0);
        stage.addEvent("addEnemy", "", [400, -100, 0, 50], 1000, 0);
        stage.addEvent("addEnemy", "", [450, -100, 0, 50], 1000, 0);
        stage.addEvent("addEnemy", "", [500, -100, 0, 50], 1000, 0);
        stage.addEvent("enemyMove", 7, [{X: 612, Y: 300}], 1001, 400);
        stage.addEvent("enemyMove", 8, [{X: 612, Y: 400}], 1001, 400);
        stage.addEvent("enemyMove", 9, [{X: 612, Y: 500}], 1001, 400);
        stage.addEvent("enemyMove", 10, [{X: 612, Y: 600}], 1001, 400);
        stage.addEvent("enemyMove", 11, [{X: -100, Y: 600}], 1001, 400);
        stage.addEvent("enemyMove", 12, [{X: -100, Y: 500}], 1001, 400);
        stage.addEvent("enemyMove", 13, [{X: -100, Y: 400}], 1001, 400);
        stage.addEvent("enemyMove", 14, [{X: -100, Y: 300}], 1001, 400);
        stage.addEvent("enemyAttack", 7, [0, 15, 350, jet], 1001, 0);
        stage.addEvent("enemyAttack", 8, [0, 15, 350, jet], 1001, 0);
        stage.addEvent("enemyAttack", 9, [0, 15, 350, jet], 1001, 0);
        stage.addEvent("enemyAttack", 10, [0, 15, 350, jet], 1001, 0);
        stage.addEvent("enemyAttack", 11, [0, 15, 350, jet], 1001, 0);
        stage.addEvent("enemyAttack", 12, [0, 15, 350, jet], 1001, 0);
        stage.addEvent("enemyAttack", 13, [0, 15, 350, jet], 1001, 0);
        stage.addEvent("enemyAttack", 14, [0, 15, 350, jet], 1001, 0);
        stage.addEvent("enemyRemove", 4, [], 1101, 0);
        stage.addEvent("enemyRemove", 5, [], 1101, 0);
        stage.addEvent("enemyRemove", 7, [], 1411, 0);
        stage.addEvent("enemyRemove", 8, [], 1411, 0);
        stage.addEvent("enemyRemove", 9, [], 1411, 0);
        stage.addEvent("enemyRemove", 10, [], 1411, 0);
        stage.addEvent("enemyRemove", 11, [], 1411, 0);
        stage.addEvent("enemyRemove", 12, [], 1411, 0);
        stage.addEvent("enemyRemove", 13, [], 1411, 0);
        stage.addEvent("enemyRemove", 14, [], 1411, 0);
        stage.addEvent("addEnemy", "", [100, -40, 0, 300], 1400, 0);
        stage.addEvent("addEnemy", "", [400, -40, 0, 300], 1400, 0);
        stage.addEvent("enemyMove", 15, [{X: 100, Y: 150}], 1450, 60);
        stage.addEvent("enemyMove", 16, [{X: 400, Y: 150}], 1450, 60);
        stage.addEvent("enemyAttack", 15, [2, 4, 50, 1, -5, 8], 1500, 0);
        stage.addEvent("enemyAttack", 16, [2, 4, 50, 1, 5, -8], 1500, 0);
        stage.addEvent("enemyAttack", 6, [2, 6, 150, 15, 15, -9], 1550, 0);
        stage.addEvent("addEnemy", "", [40, -40, 0, 100], 1700, 1);
        stage.addEvent("addEnemy", "", [480, -40, 0, 100], 1700, 1);
        stage.addEvent("addEnemy", "", [-40, 50, 0, 100], 1700, 1);
        stage.addEvent("addEnemy", "", [550, 50, 0, 100], 1700, 1);
        stage.addEvent("enemyMove", 17, [{X: 80, Y: 200}], 1701, 80);
        stage.addEvent("enemyMove", 18, [{X: 440, Y: 200}], 1701, 80);
        stage.addEvent("enemyMove", 19, [{X: 40, Y: 250}], 1701, 80);
        stage.addEvent("enemyMove", 20, [{X: 480, Y: 250}], 1701, 80);
        stage.addEvent("enemyAttack", 17, [0, 10, 1200, jet], 1710, 0);
        stage.addEvent("enemyAttack", 18, [0, 10, 1200, jet], 1710, 0);
        stage.addEvent("enemyAttack", 19, [0, 10, 1200, jet], 1710, 0);
        stage.addEvent("enemyAttack", 20, [0, 10, 1200, jet], 1710, 0);
        stage.addEvent("addEnemy", "", [80, -40, 0, 100], 1900, 1);
        stage.addEvent("addEnemy", "", [440, -40, 0, 100], 1900, 1);
        stage.addEvent("addEnemy", "", [-40, 50, 0, 100], 1900, 1);
        stage.addEvent("addEnemy", "", [550, 50, 0, 100], 1900, 1);
        stage.addEvent("enemyMove", 21, [{X: 80, Y: 300}], 1901, 80);
        stage.addEvent("enemyMove", 22, [{X: 440, Y: 300}], 1901, 80);
        stage.addEvent("enemyMove", 23, [{X: 40, Y: 350}], 1901, 80);
        stage.addEvent("enemyMove", 24, [{X: 480, Y: 350}], 1901, 80);
        stage.addEvent("enemyAttack", 21, [0, 10, 800, jet], 1910, 0);
        stage.addEvent("enemyAttack", 22, [0, 10, 800, jet], 1910, 0);
        stage.addEvent("enemyAttack", 23, [0, 10, 800, jet], 1910, 0);
        stage.addEvent("enemyAttack", 24, [0, 10, 800, jet], 1910, 0);
        stage.addEvent("enemyMove", 15, [{X: -100, Y: 150}], 1950, 60);
        stage.addEvent("enemyMove", 16, [{X: 612, Y: 150}], 1950, 60);
        stage.addEvent("enemyRemove", 15, [], 2011, 0);
        stage.addEvent("enemyRemove", 16, [], 2011, 0);
        stage.addEvent("enemyMove", 17, [{X: 480, Y: 250}], 2100, 120);
        stage.addEvent("enemyMove", 18, [{X: 40, Y: 250}], 2100, 120);
        stage.addEvent("enemyMove", 19, [{X: 440, Y: 200}], 2100, 120);
        stage.addEvent("enemyMove", 20, [{X: 80, Y: 200}], 2100, 120);
        stage.addEvent("enemyMove", 21, [{X: 480, Y: 350}], 2200, 120);
        stage.addEvent("enemyMove", 22, [{X: 40, Y: 350}], 2200, 120);
        stage.addEvent("enemyMove", 23, [{X: 440, Y: 300}], 2200, 120);
        stage.addEvent("enemyMove", 24, [{X: 80, Y: 300}], 2200, 120);
        stage.addEvent("win", 6, [], 2400, 0);
    };

    this.stage[1] = function(){
        stage.addEvent("addEnemy", "", [100, -40, 0, 20000], 1, 0);
        stage.addEvent("addEnemy", "", [400, -40, 0, 20000], 1, 0);
        stage.addEvent("enemyMove", 0, [{X: 100, Y: 200}], 80, 120);
        stage.addEvent("enemyMove", 1, [{X: 400, Y: 200}], 80, 120);
        stage.addEvent("enemyAttack", 0, [3, 12, 200, 8, -45, 70], 100, 0);
        stage.addEvent("enemyAttack", 1, [3, 12, 200, 8, -70, 45], 100, 0);
        stage.addEvent("enemyAttack", 0, [3, 12, 400, 12, -60, 55], 180, 0);
        stage.addEvent("enemyAttack", 1, [3, 12, 400, 12, -55, 60], 180, 0);
        stage.addEvent("enemyAttack", 0, [4], 230, 0);
        stage.addEvent("enemyAttack", 1, [4], 230, 0);
        stage.addEvent("enemyMove", 0, [{X: 100, Y: 150}], 250, 60);
        stage.addEvent("enemyMove", 1, [{X: 400, Y: 150}], 250, 60);
        stage.addEvent("enemyAttack", 0, [0, 15, 150, jet], 260, 0);
        stage.addEvent("enemyAttack", 1, [0, 15, 150, jet], 260, 0);
        stage.addEvent("addEnemy", "", [250, -100, 1, 100000], 370, 0);
        stage.addEvent("enemyMove", 2, [{X: 250, Y: 200}], 371, 60);
        stage.addEvent("enemyAttack", 2, [1, 8, 800, 18, 0], 371, 0);
        stage.addEvent("enemyMove", 0, [{X: -100, Y: 400}], 400, 200);
        stage.addEvent("enemyMove", 1, [{X: 612, Y: 400}], 400, 200);
        stage.addEvent("enemyAttack", 0, [2, 4, 25, 1, -75, -16], 400, 0);
        stage.addEvent("enemyAttack", 1, [2, 4, 25, 1, 75, 16], 400, 0);
        stage.addEvent("enemyAttack", 2, [1, 4, 80, 45, 0], 411, 0);
        stage.addEvent("enemyAttack", 2, [4], 440, 0);
        stage.addEvent("enemyAttack", 2, [1, 4, 80, 45, 40], 470, 0);
        stage.addEvent("enemyAttack", 2, [4], 500, 0);
        stage.addEvent("enemyAttack", 2, [2, 6, 260, 24, 10, 8], 530, 0);
        stage.addEvent("addEnemy", "", [80, -40, 0, 200], 530, 0);
        stage.addEvent("addEnemy", "", [440, -40, 0, 200], 530, 0);
        stage.addEvent("addEnemy", "", [-40, 50, 0, 200], 530, 0);
        stage.addEvent("addEnemy", "", [550, 50, 0, 200], 530, 0);
        stage.addEvent("enemyMove", 3, [{X: 80, Y: 300}], 531, 80);
        stage.addEvent("enemyMove", 4, [{X: 440, Y: 300}], 531, 80);
        stage.addEvent("enemyMove", 5, [{X: 40, Y: 350}], 531, 80);
        stage.addEvent("enemyMove", 6, [{X: 480, Y: 350}], 531, 80);
        stage.addEvent("enemyAttack", 3, [0, 10, 800, jet], 532, 0);
        stage.addEvent("enemyAttack", 4, [0, 10, 800, jet], 532, 0);
        stage.addEvent("enemyAttack", 5, [0, 10, 800, jet], 532, 0);
        stage.addEvent("enemyAttack", 6, [0, 10, 800, jet], 532, 0);
        stage.addEvent("enemyRemove", 0, [], 601, 0);
        stage.addEvent("enemyRemove", 1, [], 601, 0);
        stage.addEvent("enemyMove", 3, [{X: 480, Y: 350}], 700, 120);
        stage.addEvent("enemyMove", 4, [{X: 40, Y: 350}], 700, 120);
        stage.addEvent("enemyMove", 5, [{X: 440, Y: 300}], 700, 120);
        stage.addEvent("enemyMove", 6, [{X: 80, Y: 300}], 700, 120);
        stage.addEvent("enemyMove", 3, [{X: 460, Y: 50}], 830, 120);
        stage.addEvent("enemyMove", 4, [{X: 50, Y: 50}], 830, 120);
        stage.addEvent("enemyMove", 5, [{X: 460, Y: 100}], 830, 120);
        stage.addEvent("enemyMove", 6, [{X: 50, Y: 100}], 830, 120);
        stage.addEvent("addEnemy", "", [50, -40, 0, 200], 900, 0);
        stage.addEvent("addEnemy", "", [450, -40, 0, 200], 900, 0);
        stage.addEvent("enemyMove", 7, [{X: 150, Y: 50}], 901, 100);
        stage.addEvent("enemyMove", 8, [{X: 350, Y: 50}], 901, 100);
        stage.addEvent("enemyAttack", 7, [3, 12, 500, 12, -45, 70], 905, 0);
        stage.addEvent("enemyAttack", 8, [3, 12, 500, 12, -70, 45], 905, 0);
        stage.addEvent("enemyMove", 7, [{X: 450, Y: 150}], 1005, 100);
        stage.addEvent("enemyMove", 8, [{X: 50, Y: 150}], 1005, 100);
        stage.addEvent("enemyAttack", 7, [0, 10, 400, jet], 1005, 0);
        stage.addEvent("enemyAttack", 8, [0, 10, 400, jet], 1005, 0);
        stage.addEvent("enemyMove", 7, [{X: 612, Y: 800}], 1105, 120);
        stage.addEvent("enemyMove", 8, [{X: -100, Y: 800}], 1105, 120);
        stage.addEvent("enemyRemove", 2, [], 1150, 0);
        stage.addEvent("addEnemy", "", [250, -40, 1, 20000], 1200, 0);
        stage.addEvent("addEnemy", "", [250, -80, 1, 2000], 1200, 0);
        stage.addEvent("enemyMove", 9, [{X: 250, Y: 150}], 1200, 120);
        stage.addEvent("enemyMove", 10, [{X: 250, Y: 50}], 1200, 120);
        stage.addEvent("enemyAttack", 9, [0, 10, 400, jet], 1220, 0);
        stage.addEvent("enemyAttack", 10, [2, 4, 400, 45, 0, 5], 1220, 0);
        stage.addEvent("enemyRemove", 7, [], 1245, 0);
        stage.addEvent("enemyRemove", 8, [], 1245, 0);
        stage.addEvent("enemyAttack", 3, [3, 8, 500, 12, -45, 70], 1250, 0);
        stage.addEvent("enemyAttack", 4, [3, 8, 500, 12, -70, 45], 1250, 0);
        stage.addEvent("addEnemy", "", [50, -40, 0, 500], 1300, 0);
        stage.addEvent("addEnemy", "", [450, -40, 0, 500], 1300, 0);
        stage.addEvent("enemyMove", 11, [{X: 200, Y: 150}], 1301, 120);
        stage.addEvent("enemyMove", 12, [{X: 300, Y: 150}], 1301, 120);
        stage.addEvent("enemyAttack", 11, [3, 8, 500, 5, -90, 0], 1310, 0);
        stage.addEvent("enemyAttack", 12, [3, 8, 500, 5, -0, 90], 1310, 0);
        stage.addEvent("win", 10, [], 1400, 0);
    };

    this.play = function(id){
        this.stage[id](stage);
    };

    this.stageInit = function(context, stageid){
        context.fillStyle = "#fff";
        context.font="40px Arial";
        context.fillText("stage " + stageid, 200, 350);
    };

    this.printWin = function(context){
        context.fillStyle = "#fff";
        context.font="40px Arial";
        context.fillText("Mission Clear.", 150, 350);
        context.fillText("按'R'重玩", 170, 400);
        context.font="20px Arial";
        context.fillText("Final Score:", 170, 450);
        context.fillText(score + "", 270, 480);
    };
}